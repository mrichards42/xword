Compiling XWord with XCode3 on a Mac

----------------------------------------
Build wxWidgets
----------------------------------------

Download wxMac from
http://prdownloads.sourceforge.net/wxwindows/wxMac-2.8.10.tar.gz
(XWord is currently using wxWidgets 2.8.10.  Other versions should work,
but haven't been tested)

Unzip to a folder.

    $ cd to_wherever_wxMac_is
    $ mkdir build-release
    $ cd build-release

If building on snow leopard, tell it to build 32-bit
    $ arch_flags="-arch i386"
    $ ../configure --enable-unicode --disable-shared CFLAGS="$arch_flags" CXXFLAGS="$arch_flags" CPPFLAGS="$arch_flags" LDFLAGS="$arch_flags" OBJCFLAGS="$arch_flags" OBJCXXFLAGS="$arch_flags"
    $ make


----------------------------------------
Build XWord
----------------------------------------
XWord uses premake to generate project files.  Get the most recent version
(currently 4.4-beta3) here:

http://industriousone.com/premake/download

Unzip premake4 to xword/trunk

Edit xword/trunk/premake_config.lua to direct premake to where you installed
wxMac.  Optionally disable lua support (I've only tried this without lua).

Execute the following command to create xcode project files:

    $ premake4 xcode3

After the build process, you will probably need to do several things:

1. Copy images to XWord.app/Contents/Resources/images

2. Copy all the dylibs to XWord.app/Contents/Frameworks

3. Tell XWord and libraries where to find each other:

    $ cd xword/trunk/build/release
    $ otool -L XWord.app/Contents/MacOS/XWord

    [Spits out a long list of libraries that XWord links to.]

Somewhere in this list will be something like: "/usr/lib/libpuz.dylib"

We need to change that:

    $ install_name_tool -change \
        /usr/lib/libpuz.dylib \
        @executable_path/../Frameworks/libpuz.dylib \
        XWord.app/Contents/MacOS/XWord

Check other libraries as well:

    $ otool -L XWord.app/Frameworks/libpuz.dylib

Somewhere in this list is something like "/usr/lib/libyajl.dylib"

    $ install_name_tool -change \
        /usr/lib/libyajl.dylib \
        @executable_path/../Frameworks/libyajl.dylib \
        XWord.app/Contents/Frameworks/libpuz.dylib

Repeat install_name_tool as necessary with other libraries
